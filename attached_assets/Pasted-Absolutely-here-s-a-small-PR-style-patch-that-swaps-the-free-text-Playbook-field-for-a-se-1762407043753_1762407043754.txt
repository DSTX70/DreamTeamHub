Absolutely — here’s a **small, PR-style patch** that swaps the free-text “Playbook” field for a **select bound to `playbook_handle`**. I’m giving you the UI change and tiny API tweaks (so the server stores `playbook_handle`). Apply whichever route style you’re using (Express or Next.js).

> Apply each block with:
>
> ```bash
> git apply -p0 <<'PATCH'
> …diff…
> PATCH
> ```

---

## A) UI: Work Order Create form → select `playbook_handle`

**Assumes your form lives at `web/components/WorkOrderForm.tsx`.**
If your file lives elsewhere (e.g., `web/pages/work-orders/new.tsx`), the changes are the same—just adjust the path.

```diff
diff --git a/web/components/WorkOrderForm.tsx b/web/components/WorkOrderForm.tsx
--- a/web/components/WorkOrderForm.tsx
+++ b/web/components/WorkOrderForm.tsx
@@
-import React, { useState } from "react";
+import React, { useEffect, useState } from "react";
 
 export default function WorkOrderForm({ onCreated }:{ onCreated?: (wo:any)=>void }) {
   const [title,setTitle]=useState("");
   const [owner,setOwner]=useState("");
   const [inputs,setInputs]=useState("");
   const [output,setOutput]=useState("");
-  const [playbook,setPlaybook]=useState(""); // free-text (to be removed)
+  const [playbookHandle,setPlaybookHandle]=useState<string>("");
+  const [playbooks,setPlaybooks]=useState<Array<{handle:string; title:string}>>([]);
+  const [loadingPB,setLoadingPB]=useState(false);
   const [msg,setMsg]=useState("");
 
+  // Load playbooks for the select
+  useEffect(()=>{
+    let mounted = true;
+    (async ()=>{
+      try{
+        setLoadingPB(true);
+        const r = await fetch("/api/playbooks?query=");
+        const data = await r.json();
+        if(mounted) setPlaybooks(Array.isArray(data)? data : []);
+      } finally { setLoadingPB(false); }
+    })();
+    return ()=>{ mounted=false; };
+  },[]);
+
   async function submit(){
     setMsg("");
-    const body:any = { title, owner, inputs, output, playbook };
+    const body:any = { title, owner, inputs, output };
+    if (playbookHandle) body.playbook_handle = playbookHandle; // bind by handle
     const r = await fetch("/api/work-orders", {
       method:"POST",
       headers:{ "content-type":"application/json" },
       body: JSON.stringify(body)
     });
     if(!r.ok){ setMsg("Create failed"); return; }
     const data = await r.json();
     onCreated?.(data);
     setMsg("Created ✔");
   }
 
   return (
     <div className="rounded-2xl border p-4 space-y-3">
       <h3 className="text-lg font-semibold">New Work Order</h3>
       <input className="border rounded px-2 py-1 w-full" placeholder="Title" value={title} onChange={e=>setTitle(e.target.value)}/>
       <input className="border rounded px-2 py-1 w-full" placeholder="Owner" value={owner} onChange={e=>setOwner(e.target.value)}/>
       <input className="border rounded px-2 py-1 w-full" placeholder="Inputs (paths or query)" value={inputs} onChange={e=>setInputs(e.target.value)}/>
       <input className="border rounded px-2 py-1 w-full" placeholder="Output folder" value={output} onChange={e=>setOutput(e.target.value)}/>
-      <label className="text-sm">Playbook (free text)</label>
-      <textarea className="border rounded px-2 py-1 w-full" rows={4} value={playbook} onChange={e=>setPlaybook(e.target.value)} placeholder="Steps..."/>
+      <label className="text-sm block">Playbook</label>
+      <select
+        className="border rounded px-2 py-1 w-full"
+        value={playbookHandle}
+        onChange={(e)=>setPlaybookHandle(e.target.value)}
+      >
+        <option value="">{loadingPB ? "Loading..." : "— Select a playbook (optional) —"}</option>
+        {playbooks.map(pb=>(
+          <option key={pb.handle} value={pb.handle}>{pb.title} — {pb.handle}</option>
+        ))}
+      </select>
+      <div className="text-xs text-gray-600">
+        Tip: manage playbooks at <a className="underline" href="/playbooks" target="_blank" rel="noreferrer">/playbooks</a>.
+      </div>
 
       <div className="flex items-center gap-2">
         <button className="px-3 py-1 border rounded bg-black text-white" onClick={submit}>Create Work Order</button>
         <span className="text-sm text-gray-600">{msg}</span>
       </div>
     </div>
   );
 }
```

---

## B) Server: accept & persist `playbook_handle` on create

### If you’re using **Express** routes (`server/api/work_orders.db.route.ts`):

```diff
diff --git a/server/api/work_orders.db.route.ts b/server/api/work_orders.db.route.ts
--- a/server/api/work_orders.db.route.ts
+++ b/server/api/work_orders.db.route.ts
@@
 export async function createWorkOrder(req, res) {
   const parsed = WorkOrderCreateBody.safeParse(req.body || {});
   if (!parsed.success) {
     const msg = parsed.error.errors.map(e => e.message).join("; ");
     return res.status(422).json({ error: msg });
   }
   const b = parsed.data;
   const [row] = await db.insert(workOrder).values({
     title: b.title, owner: b.owner, autonomy: b.autonomy ?? "L1",
     inputs: b.inputs, output: b.output,
+    playbookHandle: (req.body?.playbook_handle ?? null) as any,
     capsRunsPerDay: b.caps?.runsPerDay ?? 100,
     capsUsdPerDay: b.caps?.usdPerDay ?? "2.000",
     kpiSuccessMin: b.kpis?.successMin ?? 90,
     kpiP95Max: b.kpis?.p95Max ?? "3.00",
-    playbook: b.playbook, stop: b.stop, status: "draft",
+    // legacy free-text playbook (optional): keep if you still accept it
+    playbook: (req.body?.playbook ?? b.playbook) as any,
+    stop: b.stop, status: "draft",
   }).returning();
   res.status(201).json(row);
 }
```

> (Optional) Update your Zod `WorkOrderCreateBody` to drop the old `playbook` field if you don’t want to support free-text anymore; keeping it here is backward-compatible.

### If you’re using **Next.js App Router** (`app/api/work-orders/route.ts`):

```diff
diff --git a/app/api/work-orders/route.ts b/app/api/work-orders/route.ts
--- a/app/api/work-orders/route.ts
+++ b/app/api/work-orders/route.ts
@@
 export async function POST(req: NextRequest) {
   const body = await req.json().catch(()=> ({}));
   const parsed = WorkOrderCreateBody.safeParse(body);
   if (!parsed.success) {
     const msg = parsed.error.errors.map(e=>e.message).join("; ");
     return json({ error: msg }, 422);
   }
   const b = parsed.data;
   const [row] = await db.insert(workOrder).values({
     title: b.title, owner: b.owner, autonomy: b.autonomy ?? "L1",
     inputs: b.inputs, output: b.output,
+    playbookHandle: (body?.playbook_handle ?? null),
     capsRunsPerDay: b.caps?.runsPerDay ?? 100,
     capsUsdPerDay: b.caps?.usdPerDay ?? 2.0,
     kpiSuccessMin: b.kpis?.successMin ?? 90,
     kpiP95Max: b.kpis?.p95Max ?? 3.0,
-    playbook: b.playbook, stop: b.stop, status: "draft",
+    playbook: (body?.playbook ?? b.playbook) ?? null, stop: b.stop, status: "draft",
   }).returning();
   return json(row, 201);
 }
```

---

## C) (Optional) WO list/detail UI: show the bound playbook handle

```diff
diff --git a/web/components/WorkOrderList.tsx b/web/components/WorkOrderList.tsx
--- a/web/components/WorkOrderList.tsx
+++ b/web/components/WorkOrderList.tsx
@@
-  <thead><tr><th>Title</th><th>Owner</th><th>Output</th></tr></thead>
+  <thead><tr><th>Title</th><th>Owner</th><th>Playbook</th><th>Output</th></tr></thead>
@@
-    <td className="p-2 border-b">{row.owner}</td>
+    <td className="p-2 border-b">{row.owner}</td>
+    <td className="p-2 border-b text-xs text-gray-700">{row.playbookHandle || "—"}</td>
     <td className="p-2 border-b">{row.output}</td>
```

---

## D) Quick acceptance (UI + API)

1. Open **New Work Order** form → Playbook select loads handles/titles from `/api/playbooks`.
2. Select a playbook → Submit creates a WO with `playbook_handle` set (DB column `work_order.playbook_handle`).
3. (Optional) List view shows the handle in its new column.

If you want me to also add a “Preview playbook” link (fetch `/api/playbooks/[handle]` and show its markdown in a side panel) I can drop that diff too.
