Confidential and proprietary and copyright Dustin Sparks 2025

# EVID-0007 — FILE-block Drop Discipline + END_FILE Guardrails

## Problem
When patch outputs are inconsistent (missing file markers, truncated content, mixed commentary), applying changes becomes error-prone and brittle—especially for automated intake.

## Constraints
- Must be deterministic and machine-applyable
- Must prevent "junk drops" from entering the pipeline
- Must remain human-auditable and paste-friendly

## Approach
**Canonical patch format**
- Every patch uses explicit:
  - `FILE: <path>`
  - content
  - `END_FILE`
- Drops are rejected if markers are missing or mismatched.

**Hardening practices**
- Preflight validation before applying
- Sanitization/extraction of patch-only blocks when saving
- Clear error messages when a drop is malformed

## Why it worked
It reduced ambiguity to near-zero: both humans and tooling can reliably parse and apply changes, and malformed outputs get blocked early.

## Outcome
- Dramatically fewer apply failures
- Higher trust in automation
- Cleaner audit trail ("what changed?" is explicit by file)

## Where it landed
DreamTeamHub / i³ shipping workflow hardening (drop generation + intake/apply gating)

## Related Skills
- patch_drop_discipline
- drop_validation_file_blocks

## Related Decisions
- DTH-20251226-005
